<div class="hotels-page">
  <div class="page-header">
    <div class="container">
      <div class="header-content">
        <h1 class="page-title">Nuestros Hoteles</h1>
        <p class="page-subtitle">
          Descubre todos los refugios √∫nicos de la cadena Fala en Colombia
        </p>
      </div>
    </div>
  </div>

  <!-- filtros avanzados -->
  <div class="filters-section" *ngIf="showAdvancedFilters">
    <div class="container">
      <div class="filters-card">
        <h3 class="filters-title">Refina tu b√∫squeda</h3>
        
        <form class="filters-form" (ngSubmit)="onApplyFilters()">
          <div class="filters-grid">
            <!-- destino -->
            <div class="filter-group">
              <label class="filter-label">Destino</label>
              <select class="filter-select" [(ngModel)]="searchCriteria.destination" name="destination">
                <option value="">Todos los destinos</option>
                <option value="cartagena">Cartagena</option>
                <option value="santa marta">Santa Marta</option>
                <option value="san andr√©s">San Andr√©s</option>
                <option value="medell√≠n">Medell√≠n</option>
              </select>
            </div>

            <!-- hu√©spedes -->
            <div class="filter-group">
              <label class="filter-label">Hu√©spedes</label>
              <select class="filter-select" [(ngModel)]="searchCriteria.guests" name="guests">
                <option [value]="1">1 persona</option>
                <option [value]="2">2 personas</option>
                <option [value]="3">3 personas</option>
                <option [value]="4">4 personas</option>
                <option [value]="5">5+ personas</option>
              </select>
            </div>

            <!-- fechas -->
            <div class="filter-group">
              <label class="filter-label">Check-In</label>
              <input type="date" class="filter-input" [(ngModel)]="searchCriteria.checkIn" name="checkIn">
            </div>
          
            <div class="filter-group">
              <label class="filter-label">Check-Out</label>
              <input type="date" class="filter-input" [(ngModel)]="searchCriteria.checkOut" name="checkOut">
            </div>
          </div>

          <div class="filters-actions">
            <button type="button" class="btn-ghost" (click)="onClearFilters()">
              <span class="btn-icon">üîÑ</span>
              Limpiar filtros
            </button>
            <button type="submit" class="btn-primary">
              <span class="btn-icon">üîç</span>
              Aplicar filtros
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- bot√≥n toggle filtros -->
  <div class="container">
    <div class="toggle-filters">
      <button 
        class="toggle-btn"
        (click)="toggleAdvancedFilters()">
        <span class="toggle-icon">{{ showAdvancedFilters ? '‚ñ≤' : '‚ñº' }}</span>
        {{ showAdvancedFilters ? 'Ocultar filtros' : 'Mostrar filtros avanzados' }}
      </button>
    </div>
  </div>

  <!-- lista de hoteles -->
  <div class="hotels-content">
    <div class="container">
      @defer (on viewport) {
        <app-hotel-list
          [hotels]="hotels"
          [loading]="loading"
          [error]="error"
          [searchCriteria]="hasActiveFilters() ? searchCriteria : undefined"
          [showFilters]="true"
          [showSorting]="true"
          [viewMode]="currentViewMode"
          (hotelSelected)="onHotelSelected($event)"
          (viewRoomsClicked)="onViewRooms($event)" 
          (retryLoad)="onRetryLoad()"
          (sortChanged)="onSortChanged($event)"
          (viewModeChanged)="onViewModeChanged($event)">
        </app-hotel-list>
      } @placeholder {
        <!-- esto se muestra mientras el usuario a√∫n no lleg√≥ al viewport -->
        <p>lista de hoteles pendiente de cargar...</p>
      } @loading {
        <!-- esto se muestra despu√©s de que el trigger se dispara, mientras carga -->
        <p>cargando hoteles...</p>
      } @error {
        <!-- esto se muestra si ocurre un error en la carga -->
        <p>no se pudo cargar la lista de hoteles.</p>
      }
    </div>
  </div>

  <!-- call to action cuando no hay resultados -->
  <div class="cta-section" *ngIf="!loading && hotels.length === 0">
    <div class="container">
      <div class="cta-content">
        <h3 class="cta-title">¬øNo encuentras lo que buscas?</h3>
        <p class="cta-text">
          Cont√°ctanos y te ayudaremos a encontrar el refugio perfecto para tu estad√≠a
        </p>
        <button class="btn-secondary cta-btn" (click)="onContactUs()">
          <span class="btn-icon">üìû</span>
          Contactar asesor
        </button>
      </div>
    </div>
  </div>
</div>