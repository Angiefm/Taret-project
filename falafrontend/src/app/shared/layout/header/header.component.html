<header class="header">
  <div class="header-container">
    <div class="logo">
      <a routerLink="/" class="logo-link" (click)="closeMobileMenu()">
        <div class="logo-icon">
          <img src="assets/fala-logo.png" alt="El Refugi Fala Logo" class="logo-image">
        </div>
        <div class="logo-text">
          <h1>EL REFUGI</h1>
          <p>FALA</p>
        </div>
      </a>
    </div>

    <!-- Navigation Desktop -->
    <nav class="navigation hidden-mobile">
      @for (item of navigationItems; track item.route) {
        <a 
          [routerLink]="item.route" 
          class="nav-link" 
          routerLinkActive="active" 
          [routerLinkActiveOptions]="{exact: item.exact}"
          (click)="onNavigate(item.route)">
          {{ item.label }}
        </a>
      }

      @if (isAuthenticated()) {
        <a 
          routerLink="/mis-reservas" 
          class="nav-link" 
          routerLinkActive="active">
          mis reservas
        </a>
      }
    </nav>

    <!-- Right side - Language, Currency, User -->
    <div class="header-right">
      <!-- Language & Currency -->
      <div class="locale-info hidden-mobile">
        <!-- Language Dropdown -->
        <div class="language-selector" (click)="toggleLanguageDropdown()">
          <div class="language">
            <span class="globe-icon">üåê</span>
            <span>{{ selectedLanguage.code }}</span>
            <span class="chevron" [class.rotated]="isLanguageDropdownOpen">‚ñº</span>
          </div>
          
          <!-- Language Dropdown Menu -->
          @if (isLanguageDropdownOpen) {
            <div class="language-dropdown">
              @for (language of languages; track language.code) {
                <div 
                  class="language-option"
                  [class.selected]="language.code === selectedLanguage.code"
                  (click)="selectLanguage(language); $event.stopPropagation()">
                  {{ language.name }}
                </div>
              }
            </div>
          }
        </div>

        <!-- Currency -->
        <div class="currency" (click)="cycleCurrency()" title="Cambiar moneda">
          {{ selectedCurrency.code }}
        </div>
      </div>
      
      @if (isAuthenticated()) {
        <div class="user-info hidden-mobile">
          <span class="user-name">{{ userInfo()?.firstName || 'Usuario' }}</span>
        </div>
      }
      
      <!-- Login/Logout Button -->
      <button 
        class="login-btn btn-secondary" 
        (click)="onLoginClick()">
        {{ isAuthenticated() ? 'cerrar sesi√≥n' : 'iniciar sesi√≥n' }}
      </button>

      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn visible-mobile" (click)="toggleMobileMenu()">
        <span class="hamburger-icon" [class.open]="isMobileMenuOpen">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav class="mobile-navigation" [class.open]="isMobileMenuOpen">
    <div class="mobile-nav-content">
      <!-- Mobile Navigation Links -->
      <div class="mobile-nav-links">
        @for (item of navigationItems; track item.route) {
          <a 
            [routerLink]="item.route" 
            class="mobile-nav-link" 
            routerLinkActive="active" 
            [routerLinkActiveOptions]="{exact: item.exact}"
            (click)="onNavigate(item.route)">
            {{ item.label }}
          </a>
        }
        
        @if (isAuthenticated()) {
          <a 
            routerLink="/mis-reservas" 
            class="mobile-nav-link" 
            routerLinkActive="active"
            (click)="onNavigate('/mis-reservas')">
            mis reservas
          </a>
        }
      </div>

      <!-- Mobile User Info -->
      @if (isAuthenticated()) {
        <div class="mobile-user-info">
          <p>Hola, {{ userInfo()?.firstName || 'Usuario' }}</p>
        </div>
      }

      <!-- Mobile Locale Info -->
      <div class="mobile-locale-info">
        <div class="mobile-language" (click)="toggleLanguageDropdown()">
          <span class="globe-icon">üåê</span>
          <span>{{ selectedLanguage.name }}</span>
          <span class="chevron" [class.rotated]="isLanguageDropdownOpen">‚ñº</span>
        </div>
        
        <div class="mobile-currency" (click)="cycleCurrency()">
          Moneda: {{ selectedCurrency.code }}
        </div>
      </div>
    </div>
  </nav>

  <!-- Mobile Overlay -->
  @if (isMobileMenuOpen) {
    <div 
      class="mobile-overlay" 
      (click)="closeMobileMenu()">
    </div>
  }
</header>
